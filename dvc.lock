schema: '2.0'
stages:
  features@opensmile:
    cmd: ./runIn default ./src/features/opensmile.py
    deps:
    - path: ./dist/wav
      md5: a5dcfca6e4ee1c203a40d0c05bb840a3.dir
      size: 108164012
      nfiles: 1361
    params:
      params.yaml:
        opensmile:
          featureSet: compare16/ComParE_2016.conf
    outs:
    - path: ./dist/features/opensmile
      md5: 201059b269de033414a15745e9ac2bdc.dir
      size: 311646875
      nfiles: 2
  features@deepspectrum:
    cmd: ./runIn default ./src/features/deepspectrum.py
    deps:
    - path: ./dist/wav
      md5: a5dcfca6e4ee1c203a40d0c05bb840a3.dir
      size: 108164012
      nfiles: 1361
    params:
      params.yaml:
        deepspectrum:
          extractionNetwork: densenet169
          plotMode: mel
          melBands: 128
          colourMap: viridis
          window_size:
          hop_size:
    outs:
    - path: ./dist/features/deepspectrum
      md5: 3c89455be4b8f7325f9e97eb963ae423.dir
      size: 27061750
      nfiles: 1
  audeep_spectrograms:
    cmd: ./runIn default ./src/features/audeep/spectrograms.py
    deps:
    - path: ./dist/wav
      md5: a5dcfca6e4ee1c203a40d0c05bb840a3.dir
      size: 108164012
      nfiles: 1361
    - path: ./src/features/audeep/spectrograms.py
      md5: c923552b50b4fcff3f6b53583fa0a6ac
      size: 2148
      isexec: true
    params:
      params.yaml:
        audeep.spectrograms:
          window_width: 0.08
          window_overlap: 0.04
          mel_bands: 128
          fixed_length: 3
          clip_below_values:
          - -30
          - -45
          - -60
          - -75
    outs:
    - path: ./audeep_workspace/spectrograms
      md5: d30ab1fbf164492dbbb07436a0e8430e.dir
      size: 206836832
      nfiles: 4
  audeep_autoencoder:
    cmd: ./runIn default ./src/features/audeep/autoencoder.py
    deps:
    - path: ./audeep_workspace/spectrograms
      md5: d30ab1fbf164492dbbb07436a0e8430e.dir
      size: 206836832
      nfiles: 4
    params:
      params.yaml:
        audeep.autoencoder:
          num_layers: 3
          num_units: 256
          cell: GRU
          bidirectional_encoder: false
          bidirectional_decoder: true
          num_epochs: 64
          batch_size: 512
          learning_rate: 0.001
          keep_prob: 0.8
    outs:
    - path: ./audeep_workspace/autoencoder
      md5: e4685b625e0b40579731e340c486f901.dir
      size: 13872136998
      nfiles: 524
  audeep_representatins:
    cmd: ./runIn default ./src/features/audeep/representations.py
    deps:
    - path: ./audeep_workspace/autoencoder
      md5: 6003932ff5cfa632fb708d65c3d47cd1.dir
      size: 8293235002
      nfiles: 524
    outs:
    - path: ./audeep_workspace/representations
      md5: 8af81b3bcd6a456c5a080363b6088946.dir
      size: 152669018
      nfiles: 5
  xbow:
    cmd: ./runIn default ./src/features/xbow.py
    deps:
    - path: ./dist/features/opensmile
      md5: 201059b269de033414a15745e9ac2bdc.dir
      size: 311646875
      nfiles: 2
    params:
      params.yaml:
        opensmile.featureSet: compare16/ComParE_2016.conf
        xbow:
          csize: 2000
          num_assignments: 10
    outs:
    - path: ./dist/features/xbow
      md5: 15d260d1b6045f29cf5c8cedab2ebf93.dir
      size: 14928671
      nfiles: 2
  audeep_export:
    cmd: ./runIn default ./src/features/audeep/export.py
    deps:
    - path: ./audeep_workspace/representations
      md5: 19e80b06870331deb5a1de0f251f959d.dir
      size: 67612122
      nfiles: 5
    params:
      params.yaml:
        audeep.export: -75
    outs:
    - path: ./dist/features/audeep
      md5: 01c5866421118b82fd0c6a6d9986e94b.dir
      size: 23033458
      nfiles: 1
  svm@opensmile:
    cmd: ./runIn default ./src/ml/svm.py opensmile
    deps:
    - path: ./dist/features/opensmile
      md5: 201059b269de033414a15745e9ac2bdc.dir
      size: 311646875
      nfiles: 2
    - path: ./dist/lab
      md5: 5453d5dacaea7d27a80b52ff9373890b.dir
      size: 30382
      nfiles: 3
    - path: ./src/ml/svm.py
      md5: 863b1136bfc30f3d2669be14a256edf0
      size: 7455
    outs:
    - path: ./metrics/svm/opensmile/metrics.yaml
      md5: 999ea9e6c3190caed126847d5cdf2400
      size: 413
    - path: ./results/svm/opensmile
      md5: 92f77e699761ae0a118e76d82600ba51.dir
      size: 42413
      nfiles: 6
  svm@deepspectrum:
    cmd: ./runIn default ./src/ml/svm.py deepspectrum
    deps:
    - path: ./dist/features/deepspectrum
      md5: 3c89455be4b8f7325f9e97eb963ae423.dir
      size: 27061750
      nfiles: 1
    - path: ./dist/lab
      md5: 5453d5dacaea7d27a80b52ff9373890b.dir
      size: 30382
      nfiles: 3
    - path: ./src/ml/svm.py
      md5: 863b1136bfc30f3d2669be14a256edf0
      size: 7455
    outs:
    - path: ./metrics/svm/deepspectrum/metrics.yaml
      md5: a49fb5d32823e86b88cc8c5fd98d3970
      size: 420
    - path: ./results/svm/deepspectrum
      md5: a79793eef2615d75e78b990f4cb4096c.dir
      size: 42307
      nfiles: 6
  svm@audeep:
    cmd: ./runIn default ./src/ml/svm.py audeep
    deps:
    - path: ./dist/features/audeep
      md5: 01c5866421118b82fd0c6a6d9986e94b.dir
      size: 23033458
      nfiles: 1
    - path: ./dist/lab
      md5: 5453d5dacaea7d27a80b52ff9373890b.dir
      size: 30382
      nfiles: 3
    - path: ./src/ml/svm.py
      md5: 863b1136bfc30f3d2669be14a256edf0
      size: 7455
    outs:
    - path: ./metrics/svm/audeep/metrics.yaml
      md5: 4a05f56ba06202d3e50f1b01141c1edb
      size: 421
    - path: ./results/svm/audeep
      md5: 6eb49984e887497014ca759a922450c9.dir
      size: 42467
      nfiles: 6
  svm@xbow:
    cmd: ./runIn default ./src/ml/svm.py xbow
    deps:
    - path: ./dist/features/xbow
      md5: 15d260d1b6045f29cf5c8cedab2ebf93.dir
      size: 14928671
      nfiles: 2
    - path: ./dist/lab
      md5: 5453d5dacaea7d27a80b52ff9373890b.dir
      size: 30382
      nfiles: 3
    - path: ./src/ml/svm.py
      md5: 863b1136bfc30f3d2669be14a256edf0
      size: 7455
    outs:
    - path: ./metrics/svm/xbow/metrics.yaml
      md5: c7c21d775f74a3220ebdc18993f7c519
      size: 417
    - path: ./results/svm/xbow
      md5: 9fd7b5de08ef6d72fda020afd6fa7da7.dir
      size: 42121
      nfiles: 6
  fusion:
    cmd: ./runIn default ./src/late_fusion.py
    deps:
    - path: results/svm/
      md5: db2c8c0b37286436a0a46e28629dd1da.dir
      size: 169347
      nfiles: 25
    params:
      params.yaml:
        fusion:
          to_fuse:
          - audeep
          - deepspectrum
          - opensmile
          - xbow
    outs:
    - path: metrics/fusion/metrics.yaml
      md5: 72550aa9275af67e82e4f85b660e4be0
      size: 416
    - path: results/fusion/
      md5: 34a676131fdecba9ddb58d7ba8073daa.dir
      size: 20907
      nfiles: 3
  cm:
    cmd: ./runIn default ./src/visualisations/cm.py
    deps:
    - path: ./results
      md5: 7eab7bdd1a31424b012d6b5625a9bf6e.dir
      size: 190262
      nfiles: 29
    - path: ./src/visualisations/cm.py
      md5: fb4bbd2085039e9259ab11c0291a6dca
      size: 2948
    outs:
    - path: ./visualisations/cms
      md5: 1d6a0a3ab55f2ad64eeb641e40ac6658.dir
      size: 403827
      nfiles: 10
  audeep_representations:
    cmd: ./runIn default ./src/features/audeep/representations.py
    deps:
    - path: ./audeep_workspace/autoencoder
      md5: e4685b625e0b40579731e340c486f901.dir
      size: 13872136998
      nfiles: 524
    outs:
    - path: ./audeep_workspace/representations
      md5: 19e80b06870331deb5a1de0f251f959d.dir
      size: 67612122
      nfiles: 5
