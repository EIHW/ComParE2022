schema: '2.0'
stages:
  features@opensmile:
    cmd: python src/features/opensmile.py
    deps:
    - path: ./dist/wav
      md5: 6a19fd0e6ce397d26db84382ad1d8fb8.dir
      size: 441896594
      nfiles: 4601
    params:
      params.yaml:
        opensmile:
          featureSet: compare16/ComParE_2016.conf
    outs:
    - path: ./dist/features/opensmile
      md5: f324921fd39fee8bd3983a204f0df573.dir
      size: 2673594511
      nfiles: 2
  features@deepspectrum:
    cmd: python src/features/deepspectrum.py
    deps:
    - path: ./dist/wav
      md5: 6a19fd0e6ce397d26db84382ad1d8fb8.dir
      size: 441896594
      nfiles: 4601
    params:
      params.yaml:
        deepspectrum:
          extractionNetwork: densenet201
          plotMode: mel
          melBands: 128
          colourMap: viridis
          window_size:
          hop_size:
    outs:
    - path: ./dist/features/deepspectrum
      md5: caf6520b49bb59a528f1d1b1b43b2df0.dir
      size: 106433533
      nfiles: 1
  audeep_spectrograms:
    cmd: python src/features/audeep/spectrograms.py
    deps:
    - path: ./dist/wav
      md5: 6a19fd0e6ce397d26db84382ad1d8fb8.dir
      size: 441896594
      nfiles: 4601
    - path: ./src/features/audeep/spectrograms.py
      md5: c923552b50b4fcff3f6b53583fa0a6ac
      size: 2148
    params:
      params.yaml:
        audeep.spectrograms:
          window_width: 0.08
          window_overlap: 0.04
          mel_bands: 128
          fixed_length: 3
          clip_below_values:
          - -30
          - -45
          - -60
          - -75
    outs:
    - path: ./audeep_workspace/spectrograms
      md5: 7c73f000957e473f8ab916c35eb532e2.dir
      size: 698815072
      nfiles: 4
  audeep_autoencoder:
    cmd: python src/features/audeep/autoencoder.py
    deps:
    - path: ./audeep_workspace/spectrograms
      md5: 7c73f000957e473f8ab916c35eb532e2.dir
      size: 698815072
      nfiles: 4
    params:
      params.yaml:
        audeep.autoencoder:
          num_layers: 2
          num_units: 256
          cell: GRU
          bidirectional_encoder: false
          bidirectional_decoder: true
          num_epochs: 64
          batch_size: 512
          learning_rate: 0.001
          keep_prob: 0.8
    outs:
    - path: ./audeep_workspace/autoencoder
      md5: 81ce006bb536aa9110954e7a899404fd.dir
      size: 8293220080
      nfiles: 524
  audeep_representatins:
    cmd: ./runIn default ./src/features/audeep/representations.py
    deps:
    - path: ./audeep_workspace/autoencoder
      md5: 6003932ff5cfa632fb708d65c3d47cd1.dir
      size: 8293235002
      nfiles: 524
    outs:
    - path: ./audeep_workspace/representations
      md5: 8af81b3bcd6a456c5a080363b6088946.dir
      size: 152669018
      nfiles: 5
  xbow:
    cmd: python src/features/xbow.py
    deps:
    - path: ./dist/features/opensmile
      md5: f324921fd39fee8bd3983a204f0df573.dir
      size: 2673594511
      nfiles: 2
    params:
      params.yaml:
        opensmile.featureSet: compare16/ComParE_2016.conf
        xbow:
          csize: 2000
          num_assignments: 200
    outs:
    - path: ./dist/features/xbow
      md5: 75ab4348af28d08906f9aa8c710e8e0b.dir
      size: 70261255
      nfiles: 2
  audeep_export:
    cmd: python src/features/audeep/export.py
    deps:
    - path: ./audeep_workspace/representations
      md5: d2f63637b69b46e1f035b307bcea09ee.dir
      size: 152669018
      nfiles: 5
    params:
      params.yaml:
        audeep.export: fused
    outs:
    - path: ./dist/features/audeep
      md5: b4baae96390d93076ffe3ad0d1dcd148.dir
      size: 219826327
      nfiles: 1
  svm@opensmile:
    cmd: python src/ml/svm.py opensmile
    deps:
    - path: ./dist/features/opensmile
      md5: f324921fd39fee8bd3983a204f0df573.dir
      size: 2673594511
      nfiles: 2
    - path: ./dist/lab
      md5: 3199f12a340124cc02a1779b16cb35ff.dir
      size: 116166
      nfiles: 3
    - path: ./src/ml/svm.py
      md5: 863b1136bfc30f3d2669be14a256edf0
      size: 7455
    outs:
    - path: ./metrics/svm/opensmile/metrics.yaml
      md5: 37c8b58ce44367e1e45725cd77831f62
      size: 649
    - path: ./results/svm/opensmile
      md5: 89a8710931d9ded461cda750b14a4030.dir
      size: 93599
      nfiles: 6
  svm@deepspectrum:
    cmd: python src/ml/svm.py deepspectrum
    deps:
    - path: ./dist/features/deepspectrum
      md5: caf6520b49bb59a528f1d1b1b43b2df0.dir
      size: 106433533
      nfiles: 1
    - path: ./dist/lab
      md5: 3199f12a340124cc02a1779b16cb35ff.dir
      size: 116166
      nfiles: 3
    - path: ./src/ml/svm.py
      md5: 863b1136bfc30f3d2669be14a256edf0
      size: 7455
    outs:
    - path: ./metrics/svm/deepspectrum/metrics.yaml
      md5: e11fcb7b5238af2d45881d699651c8ed
      size: 646
    - path: ./results/svm/deepspectrum
      md5: 4fb6d16fd9a57fa940dee99e91e633ef.dir
      size: 94156
      nfiles: 6
  svm@audeep:
    cmd: python src/ml/svm.py audeep
    deps:
    - path: ./dist/features/audeep
      md5: b4baae96390d93076ffe3ad0d1dcd148.dir
      size: 219826327
      nfiles: 1
    - path: ./dist/lab
      md5: 3199f12a340124cc02a1779b16cb35ff.dir
      size: 116166
      nfiles: 3
    - path: ./src/ml/svm.py
      md5: 863b1136bfc30f3d2669be14a256edf0
      size: 7455
    outs:
    - path: ./metrics/svm/audeep/metrics.yaml
      md5: 4fdf5e8905625796756e564c25e264ef
      size: 648
    - path: ./results/svm/audeep
      md5: 308118eb5413ddbb5ac030c8690d73d2.dir
      size: 96761
      nfiles: 6
  svm@xbow:
    cmd: python src/ml/svm.py xbow
    deps:
    - path: ./dist/features/xbow
      md5: 75ab4348af28d08906f9aa8c710e8e0b.dir
      size: 70261255
      nfiles: 2
    - path: ./dist/lab
      md5: 3199f12a340124cc02a1779b16cb35ff.dir
      size: 116166
      nfiles: 3
    - path: ./src/ml/svm.py
      md5: 863b1136bfc30f3d2669be14a256edf0
      size: 7455
    outs:
    - path: ./metrics/svm/xbow/metrics.yaml
      md5: 1efe77bf99820ace0e7417d577c9c1ab
      size: 648
    - path: ./results/svm/xbow
      md5: 43f246ed0978012bfd52f863e8144866.dir
      size: 94655
      nfiles: 6
  fusion:
    cmd: python src/late_fusion.py
    deps:
    - path: results/svm/
      md5: 68a1fd5b79e6b48460a92d19f15fc376.dir
      size: 379210
      nfiles: 25
    params:
      params.yaml:
        fusion:
          to_fuse:
          - audeep
          - deepspectrum
          - opensmile
          - xbow
    outs:
    - path: metrics/fusion/metrics.yaml
      md5: d44c9562bca8995e72b5d5f2d92b216a
      size: 649
    - path: results/fusion/
      md5: 341c881d809d36d5f15426f06f4b5d2b.dir
      size: 67837
      nfiles: 3
  cm:
    cmd: python src/visualisations/cm.py
    deps:
    - path: ./results
      md5: 87ec658bbe1e095a6bc617a1890b2e8a.dir
      size: 447055
      nfiles: 29
    - path: ./src/visualisations/cm.py
      md5: e910af6d69740097de372652c3cdce1e
      size: 3076
    outs:
    - path: ./visualisations/cms
      md5: 6bf8a0217376a360cebc2b0454418fea.dir
      size: 869854
      nfiles: 10
  audeep_representations:
    cmd: python src/features/audeep/representations.py
    deps:
    - path: ./audeep_workspace/autoencoder
      md5: 81ce006bb536aa9110954e7a899404fd.dir
      size: 8293220080
      nfiles: 524
    outs:
    - path: ./audeep_workspace/representations
      md5: d2f63637b69b46e1f035b307bcea09ee.dir
      size: 152669018
      nfiles: 5
  test:
    cmd: python -c "import numpy"
